<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <h3>Aggiungi un nuovo equipaggiamento</h3>
    @if (errorMessage) {
      <div class="alert alert-danger">
        {{ errorMessage }}
      </div>
    }
    <form [formGroup]="equipmentForm" (ngSubmit)="submitEquipmentForm()">
      <div class="form-group">
        <label for="bicycleId">Identificativo bicicletta:</label>
        <input id="bicycleId" type="text" formControlName="bicycleId">
        @if (equipmentForm.get('bicycleId')?.invalid && (equipmentForm.get('bicycleId')?.dirty || equipmentForm.get('bicycleId')?.touched)) {
          <div class="error-message">
            L'Identificativo bicicletta è obbligatorio.
          </div>
        }
      </div>

      <div class="form-group">
        <label for="equipment-type">Tipo di equipaggiamento:</label>

        <select id="equipment-type" class="form-control" formControlName="type">

          <option value="" disabled>Seleziona un tipo...</option>

          @for (type of equipmentTypes; track type) {
            <option [value]="type">{{ type }}</option>
          }
        </select>

        @if (equipmentForm.get('type')?.invalid && (equipmentForm.get('type')?.dirty || equipmentForm.get('type')?.touched)) {
          <div class="error-message">
            La selezione di un tipo è obbligatoria.
          </div>
        }
      </div>

      <div class="form-group">
        <label for="name">Nome:</label>
        <input id="name" type="text" formControlName="name">
        @if (equipmentForm.get('name')?.invalid && (equipmentForm.get('name')?.dirty || equipmentForm.get('name')?.touched)) {
          <div class="error-message">
            Il nome è obbligatorio.
          </div>
        }
      </div>

      <div class="form-group">
        <label for="description">Descrizione:</label>
        <input id="description" type="text" formControlName="description">
        @if (equipmentForm.get('description')?.invalid && (equipmentForm.get('description')?.dirty || equipmentForm.get('description')?.touched)) {
          <div class="error-message">
            La descrizione è richiesta.
          </div>
        }
      </div>

      <div class="form-actions">
        <button type="submit" [disabled]="equipmentForm.invalid">Aggiungi equipaggiamento</button>
        <button type="button" (click)="closeModal()">Cancella</button>
      </div>
    </form>
  </div>
</div>
